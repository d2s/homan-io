var imagePath=document.getElementById("bg-img").src;function loadImage(t,e){var n=new Image;n.onload=function(){e(n)},n.src=t}function addEvent(t,e,n){t.attachEvent?(t["e"+e+n]=n,t[e+n]=function(){t["e"+e+n](window.event)},t.attachEvent("on"+e,t[e+n])):t.addEventListener(e,n,!1)}function getScrollY(){var t=0;return"number"==typeof window.pageYOffset?t=window.pageYOffset:document.body&&document.body.scrollTop&&(t=document.body.scrollTop),t}function scale(t,e,n,r,a){return(t-e)*(a-r)/(n-e)+r}var glitchBgContainerEl=document.getElementById("glitch-bg");function glitchImage(e){loadImage(imagePath,function(t){glitch(e).fromImage(t).toDataURL().then(function(t){var e=new Image;e.src=t,glitchBgContainerEl.childNodes.length?glitchBgContainerEl.replaceChild(e,glitchBgContainerEl.childNodes[0]):glitchBgContainerEl.appendChild(e)})})}function getRandomParams(){return{amount:scale(Math.random(),0,1,10,60),iterations:scale(Math.random(),0,1,5,35),quality:scale(Math.random(),0,1,10,60),seed:scale(Math.random(),0,1,0,100)}}addEvent(window,"blur",function(t){glitchImage(getRandomParams())});var glitchImg=document.getElementById("bg-img");function loaded(){imagePath=document.getElementById("bg-img").src,glitchImage(getRandomParams())}glitchImg.complete?loaded():glitchImg.addEventListener("load",loaded),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.glitch=e()}(this,function(){"use strict";function g(e){return"object"!=typeof(e=function(t){var e=!1;if(void 0!==t)try{e=JSON.parse(JSON.stringify(t))}catch(t){}return e}(e))&&(e={}),Object.keys(n).filter(function(t){return"iterations"!==t}).forEach(function(t){"number"!=typeof e[t]||isNaN(e[t])?e[t]=n[t]:e[t]=function(t,e,n){return t<e?e:n<t?n:t}(e[t],0,100),e[t]=Math.round(e[t])}),("number"!=typeof e.iterations||isNaN(e.iterations)||e.iterations<=0)&&(e.iterations=n.iterations),e.iterations=Math.round(e.iterations),e}function p(t){if(t instanceof HTMLImageElement){if(!t.naturalWidth||!t.naturalHeight||!1===t.complete)throw new Error("This this image hasn't finished loading: "+t.src);var e=new b(t.naturalWidth,t.naturalHeight),n=e.getContext("2d");n.drawImage(t,0,0,e.width,e.height);var r=n.getImageData(0,0,e.width,e.height);return r.data&&r.data.length&&(void 0===r.width&&(r.width=t.naturalWidth),void 0===r.height&&(r.height=t.naturalHeight)),r}throw new Error("This object does not seem to be an image.")}function a(r){return new Promise(function(t,e){var n=new o;n.onload=function(){t(n)},n.onerror=function(t){e(t)},n.src=r})}function m(t,e,n,r){a(t).then(n,r)}function i(t){return{width:t.width||t.naturalWidth,height:t.height||t.naturalHeight}}function v(t,e,r,n){a(t).then(function(t){var e=i(t),n=function(t){var e=i(t),n=new b(e.width,e.height),r=n.getContext("2d");return r.drawImage(t,0,0,e.width,e.height),{canvas:n,ctx:r}}(t).ctx.getImageData(0,0,e.width,e.height);n.width||(n.width=e.width),n.height||(n.height=e.height),r(n)},n)}function N(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}var n={amount:35,iterations:20,quality:30,seed:25},b=function(t,e){void 0===t&&(t=300),void 0===e&&(e=150),this.canvasEl=document.createElement("canvas"),this.canvasEl.width=t,this.canvasEl.height=e,this.ctx=this.canvasEl.getContext("2d")},t={width:{configurable:!0},height:{configurable:!0}};b.prototype.getContext=function(){return this.ctx},b.prototype.toDataURL=function(t,e,n){if("function"!=typeof n)return this.canvasEl.toDataURL(t,e);n(this.canvasEl.toDataURL(t,e))},t.width.get=function(){return this.canvasEl.width},t.width.set=function(t){this.canvasEl.width=t},t.height.get=function(){return this.canvasEl.height},t.height.set=function(t){this.canvasEl.height=t},Object.defineProperties(b.prototype,t),b.Image=Image;var o=b.Image;"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(t,e){});var e,c=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,y=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,a=arguments,i=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var s in n=Object(a[o]))h.call(n,s)&&(i[s]=n[s]);if(c){r=c(n);for(var u=0;u<r.length;u++)f.call(n,r[u])&&(i[r[u]]=n[r[u]])}}return i},H="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};return(void((e={exports:{}}).exports=function(){function c(t){return"function"==typeof t}function e(){var t=setTimeout;return function(){return t(r,1)}}function r(){for(var t=0;t<_;t+=2)(0,B[t])(B[t+1]),B[t]=void 0,B[t+1]=void 0;_=0}function o(t,e){var n=arguments,r=this,a=new this.constructor(u);void 0===a[L]&&b(a);var i=r._state;return i?function(){var t=n[i-1];I(function(){return v(i,a,t,r._result)})}():p(r,a,t,e),a}function s(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(u);return l(e,t),e}function u(){}function h(t){try{return t.then}catch(t){return S.error=t,S}}function i(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function f(t,e,n){e.constructor===t.constructor&&n===o&&e.constructor.resolve===s?function(e,t){t._state===T?d(e,t._result):t._state===R?g(e,t._result):p(t,void 0,function(t){return l(e,t)},function(t){return g(e,t)})}(t,e):n===S?(g(t,S.error),S.error=null):void 0===n?d(t,e):c(n)?function(t,r,a){I(function(e){var n=!1,t=i(a,r,function(t){n||(n=!0,r!==t?l(e,t):d(e,t))},function(t){n||(n=!0,g(e,t))},e._label);!n&&t&&(n=!0,g(e,t))},t)}(t,e,n):d(t,e)}function l(t,e){t===e?g(t,new TypeError("You cannot resolve a promise with itself")):function(t){return"function"==typeof t||"object"==typeof t&&null!==t}(e)?f(t,e,h(e)):d(t,e)}function n(t){t._onerror&&t._onerror(t._result),m(t)}function d(t,e){t._state===x&&(t._result=e,t._state=T,0!==t._subscribers.length&&I(m,t))}function g(t,e){t._state===x&&(t._state=R,t._result=e,I(n,t))}function p(t,e,n,r){var a=t._subscribers,i=a.length;t._onerror=null,a[i]=e,a[i+T]=n,a[i+R]=r,0===i&&t._state&&I(m,t)}function m(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,a=void 0,i=t._result,o=0;o<e.length;o+=3)r=e[o],a=e[o+n],r?v(n,r,a,i):a(i);t._subscribers.length=0}}function t(){this.error=null}function v(t,e,n,r){var a=c(n),i=void 0,o=void 0,s=void 0,u=void 0;if(a){if((i=function(t,e){try{return t(e)}catch(t){return U.error=t,U}}(n,r))===U?(u=!0,o=i.error,i.error=null):s=!0,e===i)return void g(e,new TypeError("A promises callback cannot return that same promise."))}else i=r,s=!0;e._state!==x||(a&&s?l(e,i):u?g(e,o):t===T?d(e,i):t===R&&g(e,i))}function b(t){t[L]=k++,t._state=void 0,t._result=void 0,t._subscribers=[]}function a(t,e){this._instanceConstructor=t,this.promise=new t(u),this.promise[L]||b(this.promise),w(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?d(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&d(this.promise,this._result))):g(this.promise,new Error("Array Methods must be provided an Array"))}function y(t){this[L]=k++,this._result=this._state=void 0,this._subscribers=[],u!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof y?function(e,t){try{t(function(t){l(e,t)},function(t){g(e,t)})}catch(t){g(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var w=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_=0,E=void 0,j=void 0,I=function(t,e){B[_]=t,B[_+1]=e,2===(_+=2)&&(j?j(r):C())},M="undefined"!=typeof window?window:void 0,D=M||{},O=D.MutationObserver||D.WebKitMutationObserver,A="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),P="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,B=new Array(1e3),C=void 0;C=A?function(){return process.nextTick(r)}:O?function(){var t=0,e=new O(r),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():P?function(){var t=new MessageChannel;return t.port1.onmessage=r,function(){return t.port2.postMessage(0)}}():void 0===M?function(){try{var t=N();return void 0!==(E=t.runOnLoop||t.runOnContext)?function(){E(r)}:e()}catch(t){return e()}}():e();var L=Math.random().toString(36).substring(16),x=void 0,T=1,R=2,S=new t,U=new t,k=0;return a.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===x&&n<t;n++)this._eachEntry(e[n],n)},a.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===s){var a=h(e);if(a===o&&e._state!==x)this._settledAt(e._state,t,e._result);else if("function"!=typeof a)this._remaining--,this._result[t]=e;else if(n===y){var i=new n(u);f(i,e,a),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},a.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===x&&(this._remaining--,t===R?g(r,n):this._result[e]=n),0===this._remaining&&d(r,this._result)},a.prototype._willSettleAt=function(t,e){var n=this;p(t,void 0,function(t){return n._settledAt(T,e,t)},function(t){return n._settledAt(R,e,t)})},y.all=function(t){return new a(this,t).promise},y.race=function(a){var i=this;return new i(w(a)?function(t,e){for(var n=a.length,r=0;r<n;r++)i.resolve(a[r]).then(t,e)}:function(t,e){return e(new TypeError("You must pass an array to race."))})},y.resolve=s,y.reject=function(t){var e=new this(u);return g(e,t),e},y._setScheduler=function(t){j=t},y._setAsap=function(t){I=t},y._asap=I,y.prototype={constructor:y,then:o,catch:function(t){return this.then(null,t)}},y.polyfill=function(){var t=void 0;if(void 0!==H)t=H;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=y},y.Promise=y}()),e.exports).polyfill(),function(r){function t(){var t=y({},f);return i||y(t,l),t}function e(){var t=y({},f);return c||y(t,d),t}function o(t){return t}function n(n,r,a){return i=function(){return new Promise(function(t,e){if(a)n(r,t,e);else if(n===o)t(r);else try{t(n(r,t,e))}catch(t){e(t)}})},s()?u():e()}function a(r,a,i){return c=function(n){return new Promise(function(t,e){i?r(n,a,t,e):r===o?t(n):r(n,a).then(t,e)})},s()?u():t()}function s(){return i&&c}function u(){return new Promise(function(e,n){i().then(function(t){return function(n,r){return new Promise(function(t,e){(function(r,a){return new Promise(function(t,e){if(function(t){return t&&"number"==typeof t.width&&"number"==typeof t.height&&t.data&&"number"==typeof t.data.length&&"object"==typeof t.data}(r)){var n=new b(r.width,r.height);n.getContext("2d").putImageData(r,0,0),t(n.toDataURL("image/jpeg",a/100))}else e(new Error("object is not valid imageData"))})})(n,r.quality).then(function(t){return function(t,r,a){return new Promise(function(e,n){h.addEventListener("message",function(t){t.data&&t.data.base64URL?e(t.data.base64URL):n(t.data&&t.data.err?t.data.err:t)}),h.postMessage({params:a,base64URL:r,imageData:t,imageDataWidth:t.width,imageDataHeight:t.height})})}(n,t,r)},e).then(t,e)})}(t,r)},n).then(function(t){c(t).then(e,n)},n)})}r=g(r);var i,c,h=new Worker(URL.createObjectURL(new Blob(['function isImageData(a){return a&&"number"==typeof a.width&&"number"==typeof a.height&&a.data&&"number"==typeof a.data.length&&"object"==typeof a.data}function base64ToByteArray(a){for(var e,s=[],t=23,r=a.length;t<r;t++){var i=reversedBase64Map[a.charAt(t)];switch((t-23)%4){case 1:s.push(e<<2|i>>4);break;case 2:s.push((15&e)<<4|i>>2);break;case 3:s.push((3&e)<<6|i)}e=i}return s}function jpgHeaderLength(a){for(var e=417,s=0,t=a.length;s<t;s++)if(255===a[s]&&218===a[s+1]){e=s+2;break}return e}function glitchByteArray(a,e,s,t){for(var r=jpgHeaderLength(a),i=a.length-r-4,p=s/100,n=e/100,h=0;h<t;h++){var g=i/t*h|0,o=g+((i/t*(h+1)|0)-g)*n|0;o>i&&(o=i),a[~~(r+o)]=~~(256*p)}return a}function byteArrayToBase64(a){for(var e,s,t=["data:image/jpeg;base64,"],r=0,i=a.length;r<i;r++){var p=a[r];switch(e=r%3){case 0:t.push(base64Map$1[p>>2]);break;case 1:t.push(base64Map$1[(3&s)<<4|p>>4]);break;case 2:t.push(base64Map$1[(15&s)<<2|p>>6]),t.push(base64Map$1[63&p])}s=p}return 0===e?(t.push(base64Map$1[(3&s)<<4]),t.push("==")):1===e&&(t.push(base64Map$1[(15&s)<<2]),t.push("=")),t.join("")}function glitchImageData(a,e,s){if(isImageData(a))return byteArrayToBase64(glitchByteArray(base64ToByteArray(e),s.seed,s.amount,s.iterations));throw new Error("glitchImageData: imageData seems to be corrupt.")}function fail(a){self.postMessage({err:a.message||a})}function success(a){self.postMessage({base64URL:a})}var base64Chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",base64Map=base64Chars.split(""),reversedBase64Map$1={};base64Map.forEach(function(a,e){reversedBase64Map$1[a]=e});var maps={base64Map:base64Map,reversedBase64Map:reversedBase64Map$1},reversedBase64Map=maps.reversedBase64Map,base64Map$1=maps.base64Map;onmessage=function(a){var e=a.data.imageData,s=a.data.params,t=a.data.base64URL;if(e&&t&&s)try{void 0===e.width&&"number"==typeof a.data.imageDataWidth&&(e.width=a.data.imageDataWidth),void 0===e.height&&"number"==typeof a.data.imageDataHeight&&(e.height=a.data.imageDataHeight),success(glitchImageData(e,t,s))}catch(a){fail(a)}else fail(a.data.imageData?"Parameters are missing.":"ImageData is missing.");self.close()};'],{type:"text/javascript"}))),f={getParams:function(){return r},getInput:t,getOutput:e},l={fromImageData:function(t){return n(o,t)},fromImage:function(t){return n(p,t)}},d={toImage:function(t){return a(m,t,!0)},toDataURL:function(t){return a(o)},toImageData:function(t){return a(v,t,!0)}};return t()}});